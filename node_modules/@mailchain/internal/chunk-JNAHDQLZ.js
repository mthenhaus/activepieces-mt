"use strict";Object.defineProperty(exports, "__esModule", {value: true});// src/mailbox/messageId.ts
var _crypto = require('@mailchain/crypto');
var _encoding = require('@mailchain/encoding');
var _sha3 = require('@noble/hashes/sha3');
function createMailchainMessageIdCreator(keyRing) {
  return async (params) => {
    const typeBytes = _encoding.decodeUtf8.call(void 0, params.type);
    const mailIdBytes = _encoding.decodeUtf8.call(void 0, params.mailData.id);
    const mailboxBytes = params.type === "received" ? _crypto.publicKeyToBytes.call(void 0, params.mailbox) : new Uint8Array();
    const ownerBytes = params.type === "received" ? _encoding.decodeUtf8.call(void 0, params.owner) : new Uint8Array();
    return _encoding.encodeHex.call(void 0, 
      _sha3.sha3_256.call(void 0, 
        await keyRing.rootInboxKey().sign(Uint8Array.from([...typeBytes, ...mailIdBytes, ...mailboxBytes, ...ownerBytes]))
      )
    );
  };
}



exports.createMailchainMessageIdCreator = createMailchainMessageIdCreator;
