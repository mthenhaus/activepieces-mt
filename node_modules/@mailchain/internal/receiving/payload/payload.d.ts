import { ED25519ExtendedPrivateKey } from '@mailchain/crypto';
import { AxiosInstance } from 'axios';
import { KeyRingDecrypter } from '@mailchain/keyring';
import { Payload } from '../../transport/payload/payload.js';
import { Configuration } from '../../configuration.js';
import { DeliveryRequests } from '../deliveryRequests/deliveryRequests.js';
import { PayloadOriginVerifier } from '../../transport/payload/verifier.js';
import '../../transport/payload/headers.js';
import '@mailchain/api';

type ReceivedPayload = ReceivedPayloadOk | ReceivedPayloadError;
type ReceivedPayloadOk = {
    status: 'success';
    payload: Payload;
};
type ReceivedPayloadError = {
    status: 'failure';
    cause: Error;
};
type UndeliveredPayload = UndeliveredPayloadOk | UndeliveredPayloadPayloadError | UndeliveredPayloadError;
type UndeliveredPayloadOk = {
    status: 'success';
    payload: Payload;
    deliveryRequestHash: Uint8Array;
};
type UndeliveredPayloadPayloadError = {
    status: 'error-payload';
    cause: Error;
    deliveryRequestHash: Uint8Array;
};
type UndeliveredPayloadError = {
    status: 'error-delivery-request';
    cause: Error;
    deliveryRequestHash: Uint8Array;
};
declare class PayloadReceiver {
    private readonly deliveryRequests;
    private readonly payloadOriginVerifier;
    private readonly axiosInstance;
    constructor(deliveryRequests: DeliveryRequests, payloadOriginVerifier: PayloadOriginVerifier, axiosInstance: AxiosInstance);
    static create(configuration: Configuration, receiverMessagingKeyDecrypter: KeyRingDecrypter, axiosInstance?: AxiosInstance): PayloadReceiver;
    getUndelivered(): Promise<UndeliveredPayload[]>;
    get(payloadRootEncryptionKey: ED25519ExtendedPrivateKey, payloadUri: string): Promise<ReceivedPayload>;
}

export { PayloadReceiver, ReceivedPayload, UndeliveredPayload, UndeliveredPayloadError, UndeliveredPayloadOk, UndeliveredPayloadPayloadError };
