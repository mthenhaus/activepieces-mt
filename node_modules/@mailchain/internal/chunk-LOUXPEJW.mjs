// src/sending/payload/create.ts
import { KindNaClSecretKey } from "@mailchain/crypto";
import { EncodingTypes } from "@mailchain/encoding";
import isArrayBuffer from "lodash/isArrayBuffer.js";
async function createPayload(signerMessagingKey, content, contentType, pluginHeaders) {
  return {
    Headers: {
      Origin: signerMessagingKey.publicKey,
      ContentSignature: await signerMessagingKey.sign(content),
      Created: /* @__PURE__ */ new Date(),
      ContentLength: content.length,
      ContentType: contentType,
      ContentEncoding: EncodingTypes.Base64,
      ContentEncryption: KindNaClSecretKey,
      PluginHeaders: pluginHeaders
    },
    Content: isArrayBuffer(content) ? Buffer.from(content) : content
  };
}

export {
  createPayload
};
