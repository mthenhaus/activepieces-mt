import {
  createEnvelope
} from "./chunk-AEB4MHZH.mjs";
import {
  protocol
} from "./chunk-4IWBVVDK.mjs";

// src/transport/deliveryRequests/delivery.ts
import { secureRandom } from "@mailchain/crypto";
async function createDelivery(recipientMessagingKey, messageRootEncryptionKey, messageURI, rand = secureRandom) {
  const payload = {
    envelope: await createEnvelope(recipientMessagingKey, messageRootEncryptionKey, messageURI, rand)
  };
  const errMsg = protocol.Delivery.verify(payload);
  if (errMsg)
    throw Error(errMsg);
  return protocol.Delivery.create(payload);
}

export {
  createDelivery
};
