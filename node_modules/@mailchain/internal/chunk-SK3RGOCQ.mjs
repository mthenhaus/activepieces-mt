import {
  SerializablePayloadHeadersImpl
} from "./chunk-74ZFRXKY.mjs";
import {
  serialize
} from "./chunk-QUGOOV36.mjs";
import {
  encryptPayload
} from "./chunk-QOJVNNAP.mjs";
import {
  CHUNK_LENGTH_1MB
} from "./chunk-OD5QTNTX.mjs";

// src/transport/payload/payload.ts
async function serializeAndEncryptPayload(payload, payloadRootEncryptionKey) {
  const headers = new SerializablePayloadHeadersImpl().serialize(payload.Headers);
  return serialize(await encryptPayload(headers, payload.Content, payloadRootEncryptionKey, CHUNK_LENGTH_1MB));
}

export {
  serializeAndEncryptPayload
};
