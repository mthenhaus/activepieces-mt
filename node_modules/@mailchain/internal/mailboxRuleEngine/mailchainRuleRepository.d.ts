import { UserProfile } from '../user/userProfile.js';
import { a as RulesSource } from '../index-0d80c229.js';
import { MailboxRuleCondition, MailboxRuleAction, MailboxRule } from './rule.js';
import '@mailchain/crypto';
import '@mailchain/api';
import '../configuration.js';
import '../user/migrations.js';
import '../identityKeys/identityKeys.js';
import '@mailchain/addressing';
import '../nameservices/nameservices.js';
import '../user/types.js';
import 'protobufjs';
import '../migration.js';
import '@mailchain/keyring';
import '../formatters/parse.js';
import '../transport/mail/types.js';
import '../mailbox/types.js';
import '../transport/payload/headers.js';
import '../transport/payload/payload.js';
import '../mailbox/addressHasher.js';
import '../mailbox/addressIdentityKeyResolver.js';
import '../mailbox/messageCrypto.js';
import '../mailbox/messageId.js';
import '../mailbox/messageMailboxOwnerMatcher.js';
import '../mailbox/migrations.js';
import '../mailbox/userMailboxHasher.js';

/**
 * Rules repository that combines predefined Mailchain rules with user defined rules.
 */
declare class MailchainRuleRepository {
    private readonly predefinedRules;
    private readonly userProfile;
    constructor(predefinedRules: RulesSource, userProfile: UserProfile);
    static create(predefinedRules: RulesSource, userProfile: UserProfile): MailchainRuleRepository;
    /**
     * Get rules source that combines predefined Mailchain rules with user defined rules.
     */
    asRulesSource(): RulesSource;
    /**
     * Add a new user defined rule.
     */
    addUserRule(params: {
        name: string;
        condition: MailboxRuleCondition<unknown>;
        actions: MailboxRuleAction<unknown>[];
    }): Promise<MailboxRule<unknown, unknown>>;
    deleteUserRule(id: string): Promise<void>;
    /**
     * Get all user defined rules.
     */
    getUserRules(): Promise<MailboxRule<unknown, unknown>[]>;
    /**
     * Set enabled state of a user defined rule.
     */
    setEnabled(id: string, enabled: boolean): Promise<MailboxRule<unknown, unknown>>;
}

export { MailchainRuleRepository };
