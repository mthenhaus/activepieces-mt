{
  "version": 3,
  "sources": ["../../../../@segment/analytics-next/src/core/arguments-resolver/index.ts", "../../../../@segment/analytics-next/src/core/page/get-page-context.ts", "../../../../@segment/analytics-next/src/lib/pick.ts", "../../../../@segment/analytics-next/src/core/plugin/index.ts", "../../../../@segment/analytics-next/src/lib/bind-all.ts", "../../../../js-cookie/dist/js.cookie.mjs", "../../../../@segment/analytics-next/src/core/user/tld.ts", "../../../../@segment/analytics-next/src/core/storage/localStorage.ts", "../../../../@segment/analytics-next/src/core/storage/memoryStorage.ts", "../../../../@segment/analytics-next/src/core/storage/types.ts", "../../../../@segment/analytics-next/src/core/storage/settings.ts", "../../../../@segment/analytics-next/src/core/storage/universalStorage.ts", "../../../../@segment/analytics-next/src/core/storage/index.ts", "../../../../@segment/analytics-next/src/lib/is-thenable.ts", "../../../../@segment/analytics-next/src/core/analytics/index.ts", "../../../../@segment/analytics-next/src/lib/get-process-env.ts", "../../../../@segment/analytics-next/src/lib/client-hints/index.ts", "../../../../@segment/analytics-next/src/lib/on-page-change.ts", "../../../../@segment/analytics-next/src/plugins/segmentio/batched-dispatcher.ts", "../../../../@segment/analytics-next/src/plugins/segmentio/fetch-dispatcher.ts", "../../../../@segment/analytics-next/src/plugins/segmentio/normalize.ts", "../../../../@segment/analytics-next/src/core/inspector/index.ts", "../../../../@segment/analytics-next/src/node/node.browser.ts"],
  "sourcesContent": ["import {\n  isFunction,\n  isPlainObject,\n  isString,\n  isNumber,\n} from '@segment/analytics-core'\nimport { Context } from '../context'\nimport {\n  Callback,\n  JSONObject,\n  Options,\n  EventProperties,\n  SegmentEvent,\n  Traits,\n  GroupTraits,\n  UserTraits,\n} from '../events'\nimport { ID, User } from '../user'\n\n/**\n * Helper for the track method\n */\nexport function resolveArguments(\n  eventName: string | SegmentEvent,\n  properties?: EventProperties | Callback,\n  options?: Options | Callback,\n  callback?: Callback\n): [string, EventProperties | Callback, Options, Callback | undefined] {\n  const args = [eventName, properties, options, callback]\n\n  const name = isPlainObject(eventName) ? eventName.event : eventName\n  if (!name || !isString(name)) {\n    throw new Error('Event missing')\n  }\n\n  const data = isPlainObject(eventName)\n    ? eventName.properties ?? {}\n    : isPlainObject(properties)\n    ? properties\n    : {}\n\n  let opts: Options = {}\n  if (!isFunction(options)) {\n    opts = options ?? {}\n  }\n\n  if (isPlainObject(eventName) && !isFunction(properties)) {\n    opts = properties ?? {}\n  }\n\n  const cb = args.find(isFunction) as Callback | undefined\n  return [name, data, opts, cb]\n}\n\n/**\n * Helper for page, screen methods\n */\nexport function resolvePageArguments(\n  category?: string | object,\n  name?: string | object | Callback,\n  properties?: EventProperties | Options | Callback | null,\n  options?: Options | Callback,\n  callback?: Callback\n): [\n  string | null,\n  string | null,\n  EventProperties,\n  Options,\n  Callback | undefined\n] {\n  let resolvedCategory: string | undefined | null = null\n  let resolvedName: string | undefined | null = null\n  const args = [category, name, properties, options, callback]\n\n  const strings = args.filter(isString)\n  if (strings[0] !== undefined && strings[1] !== undefined) {\n    resolvedCategory = strings[0]\n    resolvedName = strings[1]\n  }\n\n  if (strings.length === 1) {\n    resolvedCategory = null\n    resolvedName = strings[0]\n  }\n\n  const resolvedCallback = args.find(isFunction) as Callback | undefined\n\n  const objects = args.filter((obj) => {\n    if (resolvedName === null) {\n      return isPlainObject(obj)\n    }\n    return isPlainObject(obj) || obj === null\n  }) as Array<JSONObject | null>\n\n  const resolvedProperties = (objects[0] ?? {}) as EventProperties\n  const resolvedOptions = (objects[1] ?? {}) as Options\n\n  return [\n    resolvedCategory,\n    resolvedName,\n    resolvedProperties,\n    resolvedOptions,\n    resolvedCallback,\n  ]\n}\n\n/**\n * Helper for group, identify methods\n */\nexport const resolveUserArguments = <T extends Traits, U extends User>(\n  user: U\n): ResolveUser<T> => {\n  return (...args): ReturnType<ResolveUser<T>> => {\n    const values: {\n      id?: ID\n      traits?: T | null\n      options?: Options\n      callback?: Callback\n    } = {}\n    // It's a stack so it's reversed so that we go through each of the expected arguments\n    const orderStack: Array<keyof typeof values> = [\n      'callback',\n      'options',\n      'traits',\n      'id',\n    ]\n\n    // Read each argument and eval the possible values here\n    for (const arg of args) {\n      let current = orderStack.pop()\n      if (current === 'id') {\n        if (isString(arg) || isNumber(arg)) {\n          values.id = arg.toString()\n          continue\n        }\n        if (arg === null || arg === undefined) {\n          continue\n        }\n        // First argument should always be the id, if it is not a valid value we can skip it\n        current = orderStack.pop()\n      }\n\n      // Traits and Options\n      if (\n        (current === 'traits' || current === 'options') &&\n        (arg === null || arg === undefined || isPlainObject(arg))\n      ) {\n        values[current] = arg as T\n      }\n\n      // Callback\n      if (isFunction(arg)) {\n        values.callback = arg as Callback\n        break // This is always the last argument\n      }\n    }\n\n    return [\n      values.id ?? user.id(),\n      (values.traits ?? {}) as T,\n      values.options ?? {},\n      values.callback,\n    ]\n  }\n}\n\n/**\n * Helper for alias method\n */\nexport function resolveAliasArguments(\n  to: string | number,\n  from?: string | number | Options,\n  options?: Options | Callback,\n  callback?: Callback\n): [string, string | null, Options, Callback | undefined] {\n  if (isNumber(to)) to = to.toString() // Legacy behaviour - allow integers for alias calls\n  if (isNumber(from)) from = from.toString()\n  const args = [to, from, options, callback]\n\n  const [aliasTo = to, aliasFrom = null] = args.filter(isString)\n  const [opts = {}] = args.filter(isPlainObject)\n  const resolvedCallback = args.find(isFunction) as Callback | undefined\n\n  return [aliasTo, aliasFrom, opts, resolvedCallback]\n}\n\ntype ResolveUser<T extends Traits> = (\n  id?: ID | object,\n  traits?: T | Callback | null,\n  options?: Options | Callback,\n  callback?: Callback\n) => [ID, T, Options, Callback | undefined]\n\nexport type IdentifyParams = Parameters<ResolveUser<UserTraits>>\nexport type GroupParams = Parameters<ResolveUser<GroupTraits>>\nexport type EventParams = Parameters<typeof resolveArguments>\nexport type PageParams = Parameters<typeof resolvePageArguments>\nexport type AliasParams = Parameters<typeof resolveAliasArguments>\n\nexport type DispatchedEvent = Context\n", "import { isPlainObject } from '@segment/analytics-core'\n\n/**\n * Final Page Context object expected in the Segment Event context\n */\nexport interface PageContext {\n  path: string\n  referrer: string\n  search: string\n  title: string\n  url: string\n}\n\ntype CanonicalUrl = string | undefined\n\nexport const BufferedPageContextDiscriminant = 'bpc' as const\n/**\n * Page Context expected to be built by the snippet.\n * Note: The key names are super short because we want to keep the strings in the html snippet short to save bytes.\n */\nexport interface BufferedPageContext {\n  __t: typeof BufferedPageContextDiscriminant // for extra uniqeness\n  c: CanonicalUrl\n  p: PageContext['path']\n  u: PageContext['url']\n  s: PageContext['search']\n  t: PageContext['title']\n  r: PageContext['referrer']\n}\n\n/**\n * `BufferedPageContext` object builder\n */\nexport const createBufferedPageContext = (\n  url: string,\n  canonicalUrl: CanonicalUrl,\n  search: string,\n  path: string,\n  title: string,\n  referrer: string\n): BufferedPageContext => ({\n  __t: BufferedPageContextDiscriminant,\n  c: canonicalUrl,\n  p: path,\n  u: url,\n  s: search,\n  t: title,\n  r: referrer,\n})\n\n// my clever/dubious way of making sure this type guard does not get out sync with the type definition\nconst BUFFERED_PAGE_CONTEXT_KEYS = Object.keys(\n  createBufferedPageContext('', '', '', '', '', '')\n) as (keyof BufferedPageContext)[]\n\nexport function isBufferedPageContext(\n  bufferedPageCtx: unknown\n): bufferedPageCtx is BufferedPageContext {\n  if (!isPlainObject(bufferedPageCtx)) return false\n  if (bufferedPageCtx.__t !== BufferedPageContextDiscriminant) return false\n\n  // ensure obj has all the keys we expect, and none we don't.\n  for (const k in bufferedPageCtx) {\n    if (!BUFFERED_PAGE_CONTEXT_KEYS.includes(k as keyof BufferedPageContext)) {\n      return false\n    }\n  }\n  return true\n}\n\n//  Legacy logic: we are we appending search parameters to the canonical URL -- I guess the canonical URL is  \"not canonical enough\" (lol)\nconst createCanonicalURL = (canonicalUrl: string, searchParams: string) => {\n  return canonicalUrl.indexOf('?') > -1\n    ? canonicalUrl\n    : canonicalUrl + searchParams\n}\n\n/**\n * Strips hash from URL.\n * http://www.segment.local#test -> http://www.segment.local\n */\nconst removeHash = (href: string) => {\n  const hashIdx = href.indexOf('#')\n  return hashIdx === -1 ? href : href.slice(0, hashIdx)\n}\n\nconst parseCanonicalPath = (canonicalUrl: string): string => {\n  try {\n    return new URL(canonicalUrl).pathname\n  } catch (_e) {\n    // this is classic behavior -- we assume that if the canonical URL is invalid, it's a raw path.\n    return canonicalUrl[0] === '/' ? canonicalUrl : '/' + canonicalUrl\n  }\n}\n\n/**\n * Create a `PageContext` from a `BufferedPageContext`.\n * `BufferedPageContext` keys are minified to save bytes in the snippet.\n */\nexport const createPageContext = ({\n  c: canonicalUrl,\n  p: pathname,\n  s: search,\n  u: url,\n  r: referrer,\n  t: title,\n}: BufferedPageContext): PageContext => {\n  const newPath = canonicalUrl ? parseCanonicalPath(canonicalUrl) : pathname\n  const newUrl = canonicalUrl\n    ? createCanonicalURL(canonicalUrl, search)\n    : removeHash(url)\n  return {\n    path: newPath,\n    referrer,\n    search,\n    title,\n    url: newUrl,\n  }\n}\n\n/**\n * Get page properties from the browser window/document.\n */\nexport const getDefaultBufferedPageContext = (): BufferedPageContext => {\n  const c = document.querySelector(\"link[rel='canonical']\")\n  return createBufferedPageContext(\n    location.href,\n    (c && c.getAttribute('href')) || undefined,\n    location.search,\n    location.pathname,\n    document.title,\n    document.referrer\n  )\n}\n\n/**\n * Get page properties from the browser window/document.\n */\nexport const getDefaultPageContext = (): PageContext =>\n  createPageContext(getDefaultBufferedPageContext())\n", "export function pick<T extends Record<string, any>, K extends keyof T>(\n  object: T,\n  keys: readonly K[]\n): Pick<T, K>\n\nexport function pick<T extends Record<string, any>>(\n  object: T,\n  keys: string[]\n): Partial<T>\n\n/**\n * @example\n * pick({ 'a': 1, 'b': '2', 'c': 3 }, ['a', 'c'])\n * => { 'a': 1, 'c': 3 }\n */\nexport function pick<T extends Record<string, any>, K extends keyof T>(\n  object: T,\n  keys: string[] | K[] | readonly K[]\n) {\n  return Object.assign(\n    {},\n    ...keys.map((key) => {\n      if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n        return { [key]: object[key] }\n      }\n    })\n  )\n}\n", "import type { CorePlugin } from '@segment/analytics-core'\nimport type { DestinationMiddlewareFunction } from '../../plugins/middleware'\nimport type { Analytics } from '../analytics'\nimport type { Context } from '../context'\n\nexport interface Plugin extends CorePlugin<Context, Analytics> {}\n\nexport interface InternalPluginWithAddMiddleware extends Plugin {\n  addMiddleware: (...fns: DestinationMiddlewareFunction[]) => void\n}\n\nexport interface InternalDestinationPluginWithAddMiddleware\n  extends InternalPluginWithAddMiddleware {\n  type: 'destination'\n}\n\nexport const isDestinationPluginWithAddMiddleware = (\n  plugin: Plugin\n): plugin is InternalDestinationPluginWithAddMiddleware => {\n  // FYI: segment's plugin does not currently have an 'addMiddleware' method\n  return 'addMiddleware' in plugin && plugin.type === 'destination'\n}\n", "export default function bindAll<\n  ObjType extends { [key: string]: any },\n  KeyType extends keyof ObjType\n>(obj: ObjType): ObjType {\n  const proto = obj.constructor.prototype\n  for (const key of Object.getOwnPropertyNames(proto)) {\n    if (key !== 'constructor') {\n      const desc = Object.getOwnPropertyDescriptor(\n        obj.constructor.prototype,\n        key\n      )\n      if (!!desc && typeof desc.value === 'function') {\n        obj[key as KeyType] = obj[key].bind(obj)\n      }\n    }\n  }\n\n  return obj\n}\n", "/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n", "import cookie from 'js-cookie'\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {string} url\n * @return {Array}\n * @api public\n */\nfunction levels(url: URL): string[] {\n  const host = url.hostname\n  const parts = host.split('.')\n  const last = parts[parts.length - 1]\n  const levels: string[] = []\n\n  // Ip address.\n  if (parts.length === 4 && parseInt(last, 10) > 0) {\n    return levels\n  }\n\n  // Localhost.\n  if (parts.length <= 1) {\n    return levels\n  }\n\n  // Create levels.\n  for (let i = parts.length - 2; i >= 0; --i) {\n    levels.push(parts.slice(i).join('.'))\n  }\n\n  return levels\n}\n\nfunction parseUrl(url: string): URL | undefined {\n  try {\n    return new URL(url)\n  } catch {\n    return\n  }\n}\n\nexport function tld(url: string): string | undefined {\n  const parsedUrl = parseUrl(url)\n  if (!parsedUrl) return\n\n  const lvls = levels(parsedUrl)\n\n  // Lookup the real top level one.\n  for (let i = 0; i < lvls.length; ++i) {\n    const cname = '__tld__'\n    const domain = lvls[i]\n    const opts = { domain: '.' + domain }\n\n    try {\n      // cookie access throw an error if the library is ran inside a sandboxed environment (e.g. sandboxed iframe)\n      cookie.set(cname, '1', opts)\n      if (cookie.get(cname)) {\n        cookie.remove(cname, opts)\n        return domain\n      }\n    } catch (_) {\n      return\n    }\n  }\n}\n", "import { StorageObject, Store } from './types'\n\n/**\n * Data storage using browser's localStorage\n */\nexport class LocalStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  private localStorageWarning(key: keyof Data, state: 'full' | 'unavailable') {\n    console.warn(`Unable to access ${key}, localStorage may be ${state}`)\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    try {\n      const val = localStorage.getItem(key)\n      if (val === null) {\n        return null\n      }\n      try {\n        return JSON.parse(val) ?? null\n      } catch (e) {\n        return (val ?? null) as unknown as Data[K] | null\n      }\n    } catch (err) {\n      this.localStorageWarning(key, 'unavailable')\n      return null\n    }\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    try {\n      localStorage.setItem(key, JSON.stringify(value))\n    } catch {\n      this.localStorageWarning(key, 'full')\n    }\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    try {\n      return localStorage.removeItem(key)\n    } catch (err) {\n      this.localStorageWarning(key, 'unavailable')\n    }\n  }\n}\n", "import { Store, StorageObject } from './types'\n\n/**\n * Data Storage using in memory object\n */\nexport class MemoryStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  private cache: Record<string, unknown> = {}\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    return (this.cache[key] ?? null) as Data[K] | null\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    this.cache[key] = value\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    delete this.cache[key]\n  }\n}\n", "import { CookieOptions } from './cookieStorage'\n\nexport const StoreType = {\n  Cookie: 'cookie',\n  LocalStorage: 'localStorage',\n  Memory: 'memory',\n} as const\n\n/**\n * Known Storage Types\n *\n * Convenience settings for storage systems that AJS includes support for\n */\nexport type StoreType = typeof StoreType[keyof typeof StoreType]\n\nexport type StorageObject = Record<string, unknown>\n\n/**\n * Defines a Storage object for use in AJS Client.\n */\nexport interface Store<Data extends StorageObject = StorageObject> {\n  /**\n   * get value for the key from the stores. it will return the first value found in the stores\n   * @param key key for the value to be retrieved\n   * @returns value for the key or null if not found\n   */\n  get<K extends keyof Data>(key: K): Data[K] | null\n\n  /**\n   * it will set the value for the key in all the stores\n   * @param key key for the value to be stored\n   * @param value value to be stored\n   * @returns value that was stored\n   */\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void\n  /**\n   * remove the value for the key from all the stores\n   * @param key key for the value to be removed\n   * @param storeTypes optional array of store types to be used for removing the value\n   */\n  remove<K extends keyof Data>(key: K): void\n}\n\nexport interface StoreTypeWithSettings<T extends StoreType = StoreType> {\n  name: T\n  settings?: T extends 'cookie' ? CookieOptions : never\n}\n\nexport type InitializeStorageArgs = (StoreTypeWithSettings | StoreType)[]\n", "import { StoreType, StoreTypeWithSettings } from './types'\n\nexport type UniversalStorageSettings = { stores: StoreType[] }\n\n// This is setup this way to permit eventually a different set of settings for custom storage\nexport type StorageSettings = UniversalStorageSettings\n\nexport function isArrayOfStoreType(\n  s: StorageSettings\n): s is UniversalStorageSettings {\n  return (\n    s &&\n    s.stores &&\n    Array.isArray(s.stores) &&\n    s.stores.every((e) => Object.values(StoreType).includes(e))\n  )\n}\n\nexport function isStoreTypeWithSettings(\n  s: StoreTypeWithSettings | StoreType\n): s is StoreTypeWithSettings {\n  return typeof s === 'object' && s.name !== undefined\n}\n", "import { Store, StorageObject } from './types'\n\n// not adding to private method because those method names do not get minified atm, and does not use 'this'\nconst _logStoreKeyError = (\n  store: Store,\n  action: 'set' | 'get' | 'remove',\n  key: string,\n  err: unknown\n) => {\n  console.warn(\n    `${store.constructor.name}: Can't ${action} key \"${key}\" | Err: ${err}`\n  )\n}\n\n/**\n * Uses multiple storages in a priority list to get/set values in the order they are specified.\n */\nexport class UniversalStorage<Data extends StorageObject = StorageObject> {\n  private stores: Store[]\n\n  constructor(stores: Store[]) {\n    this.stores = stores\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    let val: Data[K] | null = null\n\n    for (const store of this.stores) {\n      try {\n        val = store.get(key) as Data[K] | null\n        if (val !== undefined && val !== null) {\n          return val\n        }\n      } catch (e) {\n        _logStoreKeyError(store, 'get', key, e)\n      }\n    }\n    return null\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    this.stores.forEach((store) => {\n      try {\n        store.set(key, value)\n      } catch (e) {\n        _logStoreKeyError(store, 'set', key, e)\n      }\n    })\n  }\n\n  clear<K extends keyof Data>(key: K): void {\n    this.stores.forEach((store) => {\n      try {\n        store.remove(key)\n      } catch (e) {\n        _logStoreKeyError(store, 'remove', key, e)\n      }\n    })\n  }\n\n  /*\n    This is to support few scenarios where:\n    - value exist in one of the stores ( as a result of other stores being cleared from browser ) and we want to resync them\n    - read values in AJS 1.0 format ( for customers after 1.0 --> 2.0 migration ) and then re-write them in AJS 2.0 format\n  */\n  getAndSync<K extends keyof Data>(key: K): Data[K] | null {\n    const val = this.get(key)\n\n    // legacy behavior, getAndSync can change the type of a value from number to string (AJS 1.0 stores numerical values as a number)\n    const coercedValue = (typeof val === 'number' ? val.toString() : val) as\n      | Data[K]\n      | null\n\n    this.set(key, coercedValue)\n\n    return coercedValue\n  }\n}\n", "import { CookieOptions, CookieStorage } from './cookieStorage'\nimport { LocalStorage } from './localStorage'\nimport { MemoryStorage } from './memoryStorage'\nimport { isStoreTypeWithSettings } from './settings'\nimport { StoreType, Store, InitializeStorageArgs } from './types'\n\nexport * from './types'\nexport * from './localStorage'\nexport * from './cookieStorage'\nexport * from './memoryStorage'\nexport * from './universalStorage'\nexport * from './settings'\n\n/**\n * Creates multiple storage systems from an array of StoreType and options\n * @param args StoreType and options\n * @returns Storage array\n */\nexport function initializeStorages(args: InitializeStorageArgs): Store[] {\n  const storages = args.map((s) => {\n    let type: StoreType\n    let settings\n\n    if (isStoreTypeWithSettings(s)) {\n      type = s.name\n      settings = s.settings\n    } else {\n      type = s\n    }\n\n    switch (type) {\n      case StoreType.Cookie:\n        return new CookieStorage(settings)\n      case StoreType.LocalStorage:\n        return new LocalStorage()\n      case StoreType.Memory:\n        return new MemoryStorage()\n      default:\n        throw new Error(`Unknown Store Type: ${s}`)\n    }\n  })\n  return storages\n}\n\n/**\n * Injects the CookieOptions into a the arguments for initializeStorage\n * @param storeTypes list of storeType\n * @param cookieOptions cookie Options\n * @returns arguments for initializeStorage\n */\nexport function applyCookieOptions(\n  storeTypes: StoreType[],\n  cookieOptions?: CookieOptions\n): InitializeStorageArgs {\n  return storeTypes.map((s) => {\n    if (cookieOptions && s === StoreType.Cookie) {\n      return {\n        name: s,\n        settings: cookieOptions,\n      }\n    }\n    return s\n  })\n}\n", "/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nexport const isThenable = (value: unknown): boolean =>\n  typeof value === 'object' &&\n  value !== null &&\n  'then' in value &&\n  typeof (value as any).then === 'function'\n", "import {\n  AliasParams,\n  DispatchedEvent,\n  EventParams,\n  GroupParams,\n  PageParams,\n  resolveAliasArguments,\n  resolveArguments,\n  resolvePageArguments,\n  resolveUserArguments,\n  IdentifyParams,\n} from '../arguments-resolver'\nimport type { FormArgs, LinkArgs } from '../auto-track'\nimport { isOffline } from '../connection'\nimport { Context } from '../context'\nimport { dispatch } from '@segment/analytics-core'\nimport { Emitter } from '@segment/analytics-generic-utils'\nimport {\n  Callback,\n  EventFactory,\n  Integrations,\n  Plan,\n  EventProperties,\n  SegmentEvent,\n} from '../events'\nimport { isDestinationPluginWithAddMiddleware, Plugin } from '../plugin'\nimport { EventQueue } from '../queue/event-queue'\nimport { Group, ID, User, UserOptions } from '../user'\nimport autoBind from '../../lib/bind-all'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport type { LegacyIntegration } from '../../plugins/ajs-destination/types'\nimport type {\n  DestinationMiddlewareFunction,\n  MiddlewareFunction,\n} from '../../plugins/middleware'\nimport { version } from '../../generated/version'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { getGlobal } from '../../lib/get-global'\nimport { AnalyticsClassic, AnalyticsCore } from './interfaces'\nimport { HighEntropyHint } from '../../lib/client-hints/interfaces'\nimport type { CDNSettings } from '../../browser'\nimport {\n  CookieOptions,\n  MemoryStorage,\n  UniversalStorage,\n  StorageSettings,\n  StoreType,\n  applyCookieOptions,\n  initializeStorages,\n  isArrayOfStoreType,\n} from '../storage'\nimport { setGlobalAnalytics } from '../../lib/global-analytics-helper'\nimport { popPageContext } from '../buffer'\n\nconst deprecationWarning =\n  'This is being deprecated and will be not be available in future releases of Analytics JS'\n\n// reference any pre-existing \"analytics\" object so a user can restore the reference\nconst global: any = getGlobal()\nconst _analytics = global?.analytics\n\nfunction createDefaultQueue(\n  name: string,\n  retryQueue = false,\n  disablePersistance = false\n) {\n  const maxAttempts = retryQueue ? 10 : 1\n  const priorityQueue = disablePersistance\n    ? new PriorityQueue(maxAttempts, [])\n    : new PersistedPriorityQueue(maxAttempts, name)\n  return new EventQueue(priorityQueue)\n}\n\n/**\n * The public settings that are set on the analytics instance\n */\nexport class AnalyticsInstanceSettings {\n  readonly writeKey: string\n  /**\n   * This is an unstable API, it may change in the future without warning.\n   */\n  readonly cdnSettings: CDNSettings\n\n  /**\n   * Auto-track specific timeout setting   for legacy purposes.\n   */\n  timeout = 300\n\n  constructor(settings: AnalyticsSettings) {\n    this.writeKey = settings.writeKey\n    this.cdnSettings = settings.cdnSettings ?? {\n      integrations: {},\n      edgeFunction: {},\n    }\n  }\n}\n\n/**\n * The settings that are used to configure the analytics instance\n */\nexport interface AnalyticsSettings {\n  writeKey: string\n  cdnSettings?: CDNSettings\n}\n\nexport interface InitOptions {\n  /**\n   * Disables storing any data on the client-side via cookies or localstorage.\n   * Defaults to `false`.\n   *\n   */\n  disableClientPersistence?: boolean\n  /**\n   * Disables automatically converting ISO string event properties into Dates.\n   * ISO string to Date conversions occur right before sending events to a classic device mode integration,\n   * after any destination middleware have been ran.\n   * Defaults to `false`.\n   */\n  disableAutoISOConversion?: boolean\n  initialPageview?: boolean\n  cookie?: CookieOptions\n  storage?: StorageSettings\n  user?: UserOptions\n  group?: UserOptions\n  integrations?: Integrations\n  plan?: Plan\n  retryQueue?: boolean\n  obfuscate?: boolean\n  /**\n   * This callback allows you to update/mutate CDN Settings.\n   * This is called directly after settings are fetched from the CDN.\n   */\n  updateCDNSettings?: (settings: CDNSettings) => CDNSettings\n  /**\n   * Disables or sets constraints on processing of query string parameters\n   */\n  useQueryString?:\n    | boolean\n    | {\n        aid?: RegExp\n        uid?: RegExp\n      }\n  /**\n   * Array of high entropy Client Hints to request. These may be rejected by the user agent - only required hints should be requested.\n   */\n  highEntropyValuesClientHints?: HighEntropyHint[]\n  /**\n   * When using the snippet, this is the key that points to the global analytics instance (e.g. window.analytics).\n   * default: analytics\n   */\n  globalAnalyticsKey?: string\n\n  /**\n   * Disable sending any data to Segment's servers. All emitted events and API calls (including .ready()), will be no-ops, and no cookies or localstorage will be used.\n   *\n   * @example\n   * ### Basic (Will not not fetch any CDN settings)\n   * ```ts\n   * disable: process.env.NODE_ENV === 'test'\n   * ```\n   *\n   * ### Advanced (Fetches CDN Settings. Do not use this unless you require CDN settings for some reason)\n   * ```ts\n   * disable: (cdnSettings) => cdnSettings.foo === 'bar'\n   * ```\n   */\n  disable?: boolean | ((cdnSettings: CDNSettings) => boolean | Promise<boolean>)\n}\n\n/* analytics-classic stubs */\nfunction _stub(this: never) {\n  console.warn(deprecationWarning)\n}\n\nexport class Analytics\n  extends Emitter\n  implements AnalyticsCore, AnalyticsClassic\n{\n  settings: AnalyticsInstanceSettings\n  private _user: User\n  private _group: Group\n  private eventFactory: EventFactory\n  private _debug = false\n  private _universalStorage: UniversalStorage\n\n  initialized = false\n  integrations: Integrations\n  options: InitOptions\n  queue: EventQueue\n\n  constructor(\n    settings: AnalyticsSettings,\n    options?: InitOptions,\n    queue?: EventQueue,\n    user?: User,\n    group?: Group\n  ) {\n    super()\n    const cookieOptions = options?.cookie\n    const disablePersistance = options?.disableClientPersistence ?? false\n    this.settings = new AnalyticsInstanceSettings(settings)\n    this.queue =\n      queue ??\n      createDefaultQueue(\n        `${settings.writeKey}:event-queue`,\n        options?.retryQueue,\n        disablePersistance\n      )\n\n    const storageSetting = options?.storage\n    this._universalStorage = this.createStore(\n      disablePersistance,\n      storageSetting,\n      cookieOptions\n    )\n\n    this._user =\n      user ??\n      new User(\n        {\n          persist: !disablePersistance,\n          storage: options?.storage,\n          // Any User specific options override everything else\n          ...options?.user,\n        },\n        cookieOptions\n      ).load()\n    this._group =\n      group ??\n      new Group(\n        {\n          persist: !disablePersistance,\n          storage: options?.storage,\n          // Any group specific options override everything else\n          ...options?.group,\n        },\n        cookieOptions\n      ).load()\n    this.eventFactory = new EventFactory(this._user)\n    this.integrations = options?.integrations ?? {}\n    this.options = options ?? {}\n    autoBind(this)\n  }\n\n  user = (): User => {\n    return this._user\n  }\n\n  /**\n   * Creates the storage system based on the settings received\n   * @returns Storage\n   */\n  private createStore(\n    disablePersistance: boolean,\n    storageSetting: InitOptions['storage'],\n    cookieOptions?: CookieOptions | undefined\n  ): UniversalStorage {\n    // DisablePersistance option overrides all, no storage will be used outside of memory even if specified\n    if (disablePersistance) {\n      return new UniversalStorage([new MemoryStorage()])\n    } else {\n      if (storageSetting) {\n        if (isArrayOfStoreType(storageSetting)) {\n          // We will create the store with the priority for customer settings\n          return new UniversalStorage(\n            initializeStorages(\n              applyCookieOptions(storageSetting.stores, cookieOptions)\n            )\n          )\n        }\n      }\n    }\n    // We default to our multi storage with priority\n    return new UniversalStorage(\n      initializeStorages([\n        StoreType.LocalStorage,\n        {\n          name: StoreType.Cookie,\n          settings: cookieOptions,\n        },\n        StoreType.Memory,\n      ])\n    )\n  }\n\n  get storage(): UniversalStorage {\n    return this._universalStorage\n  }\n\n  async track(...args: EventParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [name, data, opts, cb] = resolveArguments(...args)\n\n    const segmentEvent = this.eventFactory.track(\n      name,\n      data as EventProperties,\n      opts,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, cb).then((ctx) => {\n      this.emit('track', name, ctx.event.properties, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async page(...args: PageParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [category, page, properties, options, callback] =\n      resolvePageArguments(...args)\n\n    const segmentEvent = this.eventFactory.page(\n      category,\n      page,\n      properties,\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('page', category, page, ctx.event.properties, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async identify(...args: IdentifyParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [id, _traits, options, callback] = resolveUserArguments(this._user)(\n      ...args\n    )\n\n    this._user.identify(id, _traits)\n    const segmentEvent = this.eventFactory.identify(\n      this._user.id(),\n      this._user.traits(),\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit(\n        'identify',\n        ctx.event.userId,\n        ctx.event.traits,\n        ctx.event.options\n      )\n      return ctx\n    })\n  }\n\n  group(): Group\n  group(...args: GroupParams): Promise<DispatchedEvent>\n  group(...args: GroupParams): Promise<DispatchedEvent> | Group {\n    const pageCtx = popPageContext(args)\n    if (args.length === 0) {\n      return this._group\n    }\n\n    const [id, _traits, options, callback] = resolveUserArguments(this._group)(\n      ...args\n    )\n\n    this._group.identify(id, _traits)\n    const groupId = this._group.id()\n    const groupTraits = this._group.traits()\n\n    const segmentEvent = this.eventFactory.group(\n      groupId,\n      groupTraits,\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('group', ctx.event.groupId, ctx.event.traits, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async alias(...args: AliasParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [to, from, options, callback] = resolveAliasArguments(...args)\n    const segmentEvent = this.eventFactory.alias(\n      to,\n      from,\n      options,\n      this.integrations,\n      pageCtx\n    )\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('alias', to, from, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async screen(...args: PageParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [category, page, properties, options, callback] =\n      resolvePageArguments(...args)\n\n    const segmentEvent = this.eventFactory.screen(\n      category,\n      page,\n      properties,\n      options,\n      this.integrations,\n      pageCtx\n    )\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit(\n        'screen',\n        category,\n        page,\n        ctx.event.properties,\n        ctx.event.options\n      )\n      return ctx\n    })\n  }\n\n  async trackClick(...args: LinkArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.link.call(this, ...args)\n  }\n\n  async trackLink(...args: LinkArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.link.call(this, ...args)\n  }\n\n  async trackSubmit(...args: FormArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.form.call(this, ...args)\n  }\n\n  async trackForm(...args: FormArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.form.call(this, ...args)\n  }\n\n  async register(...plugins: Plugin[]): Promise<Context> {\n    const ctx = Context.system()\n\n    const registrations = plugins.map((xt) =>\n      this.queue.register(ctx, xt, this)\n    )\n    await Promise.all(registrations)\n\n    return ctx\n  }\n\n  async deregister(...plugins: string[]): Promise<Context> {\n    const ctx = Context.system()\n\n    const deregistrations = plugins.map((pl) => {\n      const plugin = this.queue.plugins.find((p) => p.name === pl)\n      if (plugin) {\n        return this.queue.deregister(ctx, plugin, this)\n      } else {\n        ctx.log('warn', `plugin ${pl} not found`)\n      }\n    })\n\n    await Promise.all(deregistrations)\n\n    return ctx\n  }\n\n  debug(toggle: boolean): Analytics {\n    // Make sure legacy ajs debug gets turned off if it was enabled before upgrading.\n    if (toggle === false && localStorage.getItem('debug')) {\n      localStorage.removeItem('debug')\n    }\n    this._debug = toggle\n    return this\n  }\n\n  reset(): void {\n    this._user.reset()\n    this._group.reset()\n    this.emit('reset')\n  }\n\n  timeout(timeout: number): void {\n    this.settings.timeout = timeout\n  }\n\n  private async _dispatch(\n    event: SegmentEvent,\n    callback?: Callback\n  ): Promise<DispatchedEvent> {\n    const ctx = new Context(event)\n    if (isOffline() && !this.options.retryQueue) {\n      return ctx\n    }\n    return dispatch(ctx, this.queue, this, {\n      callback,\n      debug: this._debug,\n      timeout: this.settings.timeout,\n    })\n  }\n\n  async addSourceMiddleware(fn: MiddlewareFunction): Promise<Analytics> {\n    await this.queue.criticalTasks.run(async () => {\n      const { sourceMiddlewarePlugin } = await import(\n        /* webpackChunkName: \"middleware\" */ '../../plugins/middleware'\n      )\n\n      const integrations: Record<string, boolean> = {}\n      this.queue.plugins.forEach((plugin) => {\n        if (plugin.type === 'destination') {\n          return (integrations[plugin.name] = true)\n        }\n      })\n\n      const plugin = sourceMiddlewarePlugin(fn, integrations)\n      await this.register(plugin)\n    })\n\n    return this\n  }\n\n  /* TODO: This does not have to return a promise? */\n  addDestinationMiddleware(\n    integrationName: string,\n    ...middlewares: DestinationMiddlewareFunction[]\n  ): Promise<Analytics> {\n    this.queue.plugins\n      .filter(isDestinationPluginWithAddMiddleware)\n      .forEach((p) => {\n        if (\n          integrationName === '*' ||\n          p.name.toLowerCase() === integrationName.toLowerCase()\n        ) {\n          p.addMiddleware(...middlewares)\n        }\n      })\n\n    return Promise.resolve(this)\n  }\n\n  setAnonymousId(id?: string): ID {\n    return this._user.anonymousId(id)\n  }\n\n  async queryString(query: string): Promise<Context[]> {\n    if (this.options.useQueryString === false) {\n      return []\n    }\n\n    const { queryString } = await import(\n      /* webpackChunkName: \"queryString\" */ '../query-string'\n    )\n    return queryString(this, query)\n  }\n\n  /**\n   * @deprecated This function does not register a destination plugin.\n   *\n   * Instantiates a legacy Analytics.js destination.\n   *\n   * This function does not register the destination as an Analytics.JS plugin,\n   * all the it does it to invoke the factory function back.\n   */\n  use(legacyPluginFactory: (analytics: Analytics) => void): Analytics {\n    legacyPluginFactory(this)\n    return this\n  }\n\n  async ready(\n    callback: Function = (res: Promise<unknown>[]): Promise<unknown>[] => res\n  ): Promise<unknown> {\n    return Promise.all(\n      this.queue.plugins.map((i) => (i.ready ? i.ready() : Promise.resolve()))\n    ).then((res) => {\n      callback(res)\n      return res\n    })\n  }\n\n  // analytics-classic api\n\n  noConflict(): Analytics {\n    console.warn(deprecationWarning)\n    setGlobalAnalytics(_analytics ?? this)\n    return this\n  }\n\n  normalize(msg: SegmentEvent): SegmentEvent {\n    console.warn(deprecationWarning)\n    return this.eventFactory['normalize'](msg)\n  }\n\n  get failedInitializations(): string[] {\n    console.warn(deprecationWarning)\n    return this.queue.failedInitializations\n  }\n\n  get VERSION(): string {\n    return version\n  }\n\n  /* @deprecated - noop */\n  async initialize(\n    _settings?: AnalyticsSettings,\n    _options?: InitOptions\n  ): Promise<Analytics> {\n    console.warn(deprecationWarning)\n    return Promise.resolve(this)\n  }\n\n  init = this.initialize.bind(this)\n\n  async pageview(url: string): Promise<Analytics> {\n    console.warn(deprecationWarning)\n    await this.page({ path: url })\n    return this\n  }\n\n  get plugins() {\n    console.warn(deprecationWarning)\n    // @ts-expect-error\n    return this._plugins ?? {}\n  }\n\n  get Integrations() {\n    console.warn(deprecationWarning)\n    const integrations = this.queue.plugins\n      .filter((plugin) => plugin.type === 'destination')\n      .reduce((acc, plugin) => {\n        const name = `${plugin.name\n          .toLowerCase()\n          .replace('.', '')\n          .split(' ')\n          .join('-')}Integration`\n\n        // @ts-expect-error\n        const integration = window[name] as\n          | (LegacyIntegration & { Integration?: LegacyIntegration })\n          | undefined\n\n        if (!integration) {\n          return acc\n        }\n\n        const nested = integration.Integration // hack - Google Analytics function resides in the \"Integration\" field\n        if (nested) {\n          acc[plugin.name] = nested\n          return acc\n        }\n\n        acc[plugin.name] = integration as LegacyIntegration\n        return acc\n      }, {} as Record<string, LegacyIntegration>)\n\n    return integrations\n  }\n\n  log = _stub\n  addIntegrationMiddleware = _stub\n  listeners = _stub\n  addEventListener = _stub\n  removeAllListeners = _stub\n  removeListener = _stub\n  removeEventListener = _stub\n  hasListeners = _stub\n  add = _stub\n  addIntegration = _stub\n\n  // snippet function\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  push(args: any[]) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const an = this as any\n    const method = args.shift()\n    if (method) {\n      if (!an[method]) return\n    }\n    an[method].apply(this, args)\n  }\n}\n\n/**\n * @returns a no-op analytics instance that does not create cookies or localstorage, or send any events to segment.\n */\nexport class NullAnalytics extends Analytics {\n  constructor() {\n    super({ writeKey: '' }, { disableClientPersistence: true })\n    this.initialized = true\n  }\n}\n", "/**\n * Returns `process.env` if it is available in the environment.\n * Always returns an object make it similarly easy to use as `process.env`.\n */\nexport function getProcessEnv(): { [key: string]: string | undefined } {\n  if (typeof process === 'undefined' || !process.env) {\n    return {}\n  }\n\n  return process.env\n}\n", "import { HighEntropyHint, NavigatorUAData, UADataValues } from './interfaces'\n\nexport async function clientHints(\n  hints?: HighEntropyHint[]\n): Promise<UADataValues | undefined> {\n  const userAgentData = (navigator as any).userAgentData as\n    | NavigatorUAData\n    | undefined\n\n  if (!userAgentData) return undefined\n\n  if (!hints) return userAgentData.toJSON()\n  return userAgentData\n    .getHighEntropyValues(hints)\n    .catch(() => userAgentData.toJSON())\n}\n", "/**\n * Register event listener on document that fires when:\n * * tab change or tab close (in mobile or desktop)\n * * click back / forward button\n * * click any link or perform any other navigation action\n * * soft refresh / hard refresh\n *\n * adapted from https://stackoverflow.com/questions/3239834/window-onbeforeunload-not-working-on-the-ipad/52864508#52864508,\n */\nexport const onPageChange = (cb: (unloaded: boolean) => void) => {\n  let unloaded = false // prevents double firing if both are supported\n\n  window.addEventListener('pagehide', () => {\n    if (unloaded) return\n    unloaded = true\n    cb(unloaded)\n  })\n\n  // using document instead of window because of bug affecting browsers before safari 14 (detail in footnotes https://caniuse.com/?search=visibilitychange)\n  document.addEventListener('visibilitychange', () => {\n    if (document.visibilityState == 'hidden') {\n      if (unloaded) return\n      unloaded = true\n    } else {\n      unloaded = false\n    }\n    cb(unloaded)\n  })\n}\n", "import { SegmentEvent } from '../../core/events'\nimport { fetch } from '../../lib/fetch'\nimport { onPageChange } from '../../lib/on-page-change'\n\nexport type BatchingDispatchConfig = {\n  size?: number\n  timeout?: number\n  keepalive?: boolean\n}\n\nconst MAX_PAYLOAD_SIZE = 500\nconst MAX_KEEPALIVE_SIZE = 64\n\nfunction kilobytes(buffer: unknown): number {\n  const size = encodeURI(JSON.stringify(buffer)).split(/%..|./).length - 1\n  return size / 1024\n}\n\n/**\n * Checks if the payload is over or close to\n * the maximum payload size allowed by tracking\n * API.\n */\nfunction approachingTrackingAPILimit(buffer: unknown): boolean {\n  return kilobytes(buffer) >= MAX_PAYLOAD_SIZE - 50\n}\n\n/**\n * Checks if payload is over or approaching the limit for keepalive\n * requests. If keepalive is enabled we want to avoid\n * going over this to prevent data loss.\n */\nfunction passedKeepaliveLimit(buffer: unknown): boolean {\n  return kilobytes(buffer) >= MAX_KEEPALIVE_SIZE - 10\n}\n\nfunction chunks(batch: object[]): Array<object[]> {\n  const result: object[][] = []\n  let index = 0\n\n  batch.forEach((item) => {\n    const size = kilobytes(result[index])\n    if (size >= 64) {\n      index++\n    }\n\n    if (result[index]) {\n      result[index].push(item)\n    } else {\n      result[index] = [item]\n    }\n  })\n\n  return result\n}\n\nexport default function batch(\n  apiHost: string,\n  config?: BatchingDispatchConfig\n) {\n  let buffer: object[] = []\n  let pageUnloaded = false\n\n  const limit = config?.size ?? 10\n  const timeout = config?.timeout ?? 5000\n\n  function sendBatch(batch: object[]) {\n    if (batch.length === 0) {\n      return\n    }\n\n    const writeKey = (batch[0] as SegmentEvent)?.writeKey\n\n    // Remove sentAt from every event as batching only needs a single timestamp\n    const updatedBatch = batch.map((event) => {\n      const { sentAt, ...newEvent } = event as SegmentEvent\n      return newEvent\n    })\n\n    return fetch(`https://${apiHost}/b`, {\n      keepalive: config?.keepalive || pageUnloaded,\n      headers: {\n        'Content-Type': 'text/plain',\n      },\n      method: 'post',\n      body: JSON.stringify({\n        writeKey,\n        batch: updatedBatch,\n        sentAt: new Date().toISOString(),\n      }),\n    })\n  }\n\n  async function flush(): Promise<unknown> {\n    if (buffer.length) {\n      const batch = buffer\n      buffer = []\n      return sendBatch(batch)\n    }\n  }\n\n  let schedule: NodeJS.Timeout | undefined\n\n  function scheduleFlush(): void {\n    if (schedule) {\n      return\n    }\n\n    schedule = setTimeout(() => {\n      schedule = undefined\n      flush().catch(console.error)\n    }, timeout)\n  }\n\n  onPageChange((unloaded) => {\n    pageUnloaded = unloaded\n\n    if (pageUnloaded && buffer.length) {\n      const reqs = chunks(buffer).map(sendBatch)\n      Promise.all(reqs).catch(console.error)\n    }\n  })\n\n  async function dispatch(_url: string, body: object): Promise<unknown> {\n    buffer.push(body)\n\n    const bufferOverflow =\n      buffer.length >= limit ||\n      approachingTrackingAPILimit(buffer) ||\n      (config?.keepalive && passedKeepaliveLimit(buffer))\n\n    return bufferOverflow || pageUnloaded ? flush() : scheduleFlush()\n  }\n\n  return {\n    dispatch,\n  }\n}\n", "import { fetch } from '../../lib/fetch'\n\nexport type Dispatcher = (url: string, body: object) => Promise<unknown>\n\nexport type StandardDispatcherConfig = {\n  keepalive?: boolean\n}\n\nexport default function (config?: StandardDispatcherConfig): {\n  dispatch: Dispatcher\n} {\n  function dispatch(url: string, body: object): Promise<unknown> {\n    return fetch(url, {\n      keepalive: config?.keepalive,\n      headers: { 'Content-Type': 'text/plain' },\n      method: 'post',\n      body: JSON.stringify(body),\n    })\n  }\n\n  return {\n    dispatch,\n  }\n}\n", "import { Analytics } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { SegmentFacade } from '../../lib/to-facade'\nimport { SegmentioSettings } from './index'\n\nexport function normalize(\n  analytics: Analytics,\n  json: ReturnType<SegmentFacade['json']>,\n  settings?: SegmentioSettings,\n  integrations?: CDNSettings['integrations']\n): object {\n  const user = analytics.user()\n\n  delete json.options\n\n  json.writeKey = settings?.apiKey\n\n  json.userId = json.userId || user.id()\n  json.anonymousId = json.anonymousId || user.anonymousId()\n\n  json.sentAt = new Date()\n\n  const failed = analytics.queue.failedInitializations || []\n  if (failed.length > 0) {\n    json._metadata = { failedInitializations: failed }\n  }\n\n  const bundled: string[] = []\n  const unbundled: string[] = []\n\n  for (const key in integrations) {\n    const integration = integrations[key]\n    if (key === 'Segment.io') {\n      bundled.push(key)\n    }\n    if (integration.bundlingStatus === 'bundled') {\n      bundled.push(key)\n    }\n    if (integration.bundlingStatus === 'unbundled') {\n      unbundled.push(key)\n    }\n  }\n\n  // This will make sure that the disabled cloud mode destinations will be\n  // included in the unbundled list.\n  for (const settingsUnbundled of settings?.unbundledIntegrations || []) {\n    if (!unbundled.includes(settingsUnbundled)) {\n      unbundled.push(settingsUnbundled)\n    }\n  }\n\n  const configIds = settings?.maybeBundledConfigIds ?? {}\n  const bundledConfigIds: string[] = []\n\n  bundled.sort().forEach((name) => {\n    ;(configIds[name] ?? []).forEach((id) => {\n      bundledConfigIds.push(id)\n    })\n  })\n\n  if (settings?.addBundledMetadata !== false) {\n    json._metadata = {\n      ...json._metadata,\n      bundled: bundled.sort(),\n      unbundled: unbundled.sort(),\n      bundledIds: bundledConfigIds,\n    }\n  }\n\n  return json\n}\n", "import { getGlobal } from '../../lib/get-global'\nimport type { Analytics } from '../analytics'\n\nconst env = getGlobal()\n\n// The code below assumes the inspector extension will use Object.assign\n// to add the inspect interface on to this object reference (unless the\n// extension code ran first and has already set up the variable)\nconst inspectorHost: {\n  attach: (analytics: Analytics) => void\n} = ((env as any)['__SEGMENT_INSPECTOR__'] ??= {})\n\nexport const attachInspector = (analytics: Analytics) =>\n  inspectorHost.attach?.(analytics as any)\n", "export class AnalyticsNode {\n  static load(): Promise<never> {\n    return Promise.reject(\n      new Error('AnalyticsNode is not available in browsers.')\n    )\n  }\n}\n"],
  "mappings": "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",
  "names": ["_a", "_b", "_a", "_a", "EventFactory", "_a", "EventQueue", "_a", "converter", "levels", "_a", "CookieStorage", "_a", "LocalStorage", "_a", "MemoryStorage", "_a", "UniversalStorage", "_a", "cookieOptions", "User", "cookieOptions", "_a", "_b", "Group", "_a", "_b", "PreInitMethodCall", "PreInitMethodCallBuffer", "_a", "_a", "AnalyticsBuffered", "AnalyticsInstanceSettings", "_a", "Analytics", "cookieOptions", "_a", "_b", "plugin", "NullAnalytics", "_a", "_b", "ampId", "EnvironmentEnrichmentPlugin", "ActionDestination", "_a", "_b", "_a", "_b", "plugin", "batch", "_a", "_b", "scheduleFlush", "dispatch", "dispatch", "_b", "_a", "_a", "scheduleFlush", "_b", "_a", "segmentio", "_a", "_b", "_a", "AnalyticsBrowser", "AnalyticsNode"]
}
